
# Entrega 3

Para esta entrega se implementó una plataforma para la gestión comercial de vuelos.

Integrantes:

- Martín Andrighetti
- Antonia Blanco
- Lucas Fernández
- Catalina Lebedina

## Información de login

Se implementó un botón en la página principal que transforma los datos de aerolíneas y pasajeros en
cuentas a las que se puede realizar login. Este botón ya fue activado, por lo que se presenta la
información generada a continuación para conveniencia:

| username  |    contraseña    |   tipo    |
|-----------|------------------|-----------|
| DGAC      | admin            | dgac      |
| ADC       | 323370867        | aerolinea |
| AZI       | 318885449        | aerolinea |
| BTA       | 947238688        | aerolinea |
| COG       | 328326506        | aerolinea |
| EAL       | 158124428        | aerolinea |
| ETA       | 159610164        | aerolinea |
| IBE       | 71258262         | aerolinea |
| KAI       | 302318284        | aerolinea |
| KEA       | 881276334        | aerolinea |
| LAM       | 511903589        | aerolinea |
| LAT       | 367917395        | aerolinea |
| LAW       | 829744620        | aerolinea |
| LRC       | 843852767        | aerolinea |
| LUD       | 587157449        | aerolinea |
| MPH       | 801417571        | aerolinea |
| NCY       | 983747811        | aerolinea |
| QAF       | 306496653        | aerolinea |
| UAN       | 639936198        | aerolinea |
| UCA       | 715434968        | aerolinea |
| XLE       | 548432036        | aerolinea |
| W06120402 | 37954eaccb323fec | pasajero  |
| T33834498 | 9d999cd17e1684e2 | pasajero  |
| G96421276 | c723f8f5aedfe0da | pasajero  |
| D99418548 | 848c270e4a67a75d | pasajero  |
| I71542181 | 72e277186b7fd678 | pasajero  |
| S03830222 | 901b0513cef8cc5c | pasajero  |
| J33947155 | 8c9b2606783621d3 | pasajero  |
| F23633774 | 290271697f838320 | pasajero  |
| O41678476 | afb68047c86dd836 | pasajero  |
| J46610530 | f010d57695e24d9d | pasajero  |
| E44895667 | 973ecfeb4db95193 | pasajero  |
| H44001820 | facec02a9d82b2f8 | pasajero  |
| G15489494 | 7c989b2a7bffd358 | pasajero  |
| C59429415 | 319101dfabfad4fa | pasajero  |
| C63211080 | 375b9894bcef90ea | pasajero  |
| D84069297 | a5f3166fc7364dd9 | pasajero  |
| M25657749 | 987a79fb446e9ffc | pasajero  |
| V39868007 | d2dafef95ae7ab4e | pasajero  |
| L56496275 | 27c39937e4b07b86 | pasajero  |
| I19062847 | ff4c418a7edaa03e | pasajero  |
| V79731274 | 389941f687d91954 | pasajero  |
| J39937043 | ec99ce554b824a2a | pasajero  |
| R56995721 | 52464007aa6df239 | pasajero  |
| C87025090 | 874b0edb50f0b4df | pasajero  |
| U37349664 | 3528b33a13582d51 | pasajero  |
| I63697476 | a1ccd3d8019e2d32 | pasajero  |
| N49905893 | 6a11e1ad5ce636b9 | pasajero  |
| J46009647 | 7ec8dbc24949f23a | pasajero  |
| H23592194 | 36142fc0bf4f0334 | pasajero  |
| W23173820 | d3b36f6074ae789f | pasajero  |
| N68461604 | fc7a1fb3fd62137b | pasajero  |
| S05106445 | d4b69fcbd18933ce | pasajero  |
| Y88079794 | 4cab6ad4a55cea9a | pasajero  |
| L87663260 | 58757a6c2dae8bfb | pasajero  |
| J34719947 | 580c2e41515204ce | pasajero  |
| X91486662 | 9aa51eeee845839b | pasajero  |
| Q76465555 | cbba528e4aedefb8 | pasajero  |
| O01507856 | 77bf0955236ab95c | pasajero  |
| D64763364 | 7fb881bc7c4d3f29 | pasajero  |
| X49704522 | b0664b8c1882cf03 | pasajero  |
| A17367163 | af0d13bf60ea490d | pasajero  |
| A40223024 | c0978041891d456c | pasajero  |
| F69466449 | 69651c583b65338c | pasajero  |
| G69357980 | eaca048b0681af33 | pasajero  |
| I71394677 | c8367a3c4b8b4a43 | pasajero  |
| T18212951 | 5000fca81f5c653f | pasajero  |
| N47846939 | 52ca801e6c8446c6 | pasajero  |
| R10584802 | 70225c2a7987e35d | pasajero  |
| N15841852 | 4b48fb4c02da17e9 | pasajero  |
| O04335063 | f97592d03c551d63 | pasajero  |
| Z09262256 | 3277b4460f5b667d | pasajero  |
| L94336722 | d63a4aa531bf0ace | pasajero  |
| F70729457 | 1a2d858a6ee28576 | pasajero  |
| Y13424296 | f3f988f177089d9e | pasajero  |
| Y05451726 | f0ee854df6de4751 | pasajero  |
| T72132858 | 1d7fb00a6518e5f3 | pasajero  |
| F09235820 | 1e2407377bc6484b | pasajero  |
| N24258653 | 69cd185ada0f38a6 | pasajero  |
| P34583903 | 7d6ce28029c305c8 | pasajero  |
| I07581924 | b168b6a8f3213e3a | pasajero  |
| N07672370 | e656b7de1b5b032b | pasajero  |
| Y33413387 | b4c0d68cbcce9c4d | pasajero  |
| F15206543 | 6bbeab9016d49012 | pasajero  |
| N55362278 | fd523b1e0647441b | pasajero  |
| J86333952 | 190f5797dd8c3ed6 | pasajero  |
| T59160871 | a165ff3a4cc0a374 | pasajero  |
| P11550487 | 02a2132e24f10848 | pasajero  |
| V03976673 | 647b05f12a49725b | pasajero  |
| Z51226931 | a9d5e655626eee3d | pasajero  |
| P84627985 | 8b03c10564e4b5df | pasajero  |
| D46250570 | f606f627e0768d64 | pasajero  |
| J76795477 | 7d0c0dc33b553308 | pasajero  |
| X84322989 | 4adad1ff1e4b43ac | pasajero  |
| Y38354449 | 4b8ee3de11d429d3 | pasajero  |
| Q62966391 | 11b146dc9c1c380d | pasajero  |
| D39176940 | 57c70589cdea46bb | pasajero  |
| U68917595 | a8bb8eeac8f2fc11 | pasajero  |
| G04408945 | 0bab0491b469f8c9 | pasajero  |
| I78807927 | 3455061a8cfec3f1 | pasajero  |
| Z87364523 | 66c40ca76169618e | pasajero  |
| L97895867 | 220dcdfb0dd5c58c | pasajero  |
| O85238546 | a6ddb16cdddeac94 | pasajero  |
| J47009281 | 0dcb2c2c5af9f2b2 | pasajero  |
| K07643594 | 1b8dbd9416d741a7 | pasajero  |
| B30315997 | ad1d5fee116ef110 | pasajero  |
| F89276118 | 2b32a0e58a503e22 | pasajero  |
| Y23187711 | cd78d24d90d177de | pasajero  |
| D76513142 | bf47e84de0838f16 | pasajero  |
| X66304032 | ad6887a4e491ac77 | pasajero  |
| R17782317 | 6b25a694a889ecf9 | pasajero  |

Como anexo, para generar las contraseñas de las distintas cuentas se utilizan las siguientes reglas:

- Para la cuenta DGAC, la contraseña es siempre `admin`.
- Para las cuentas de tipo `aerolinea`, la contraseña es un número aleatorio entre `0` y `1000000000`.
- Para las cuentas de tipo `pasajero`, la contraseña se compone de 2 partes. La primera son los primeros 8 caracteres del hash MD5 del nombre del pasajero. La segunda son los primeros 8 caracteres del hash MD5 del pasaporte del pasajero. Esto resulta en una contraseña de 16 caracteres hexadecimales.

La implementación de esta funcionalidad se encuentra en el archivo `Sites/crear_usuarios.php`.

## Funcionalidad adicional

La funcionalidad adicional escogida es la creación de un nuevo vuelo por parte de las aerolíneas.

Este menú es accesible desde la página principal de las aerolíneas como un botón "proponer vuelos".

Esta funcionalidad se implementa en `Sites/sesion_aerolineas.php`.

## Procedimiento almacenado

El archivo que contiene el código del procedimiento almacenado en lenguaje PL/pgSQL se encuentra en la ruta `Entrega3/hacer_reserva.sql`.
Este archivo implementa la función SQL `hacer_reserva(id_reservador, id_vuelo, pasajeros) -> varchar`.

La utilización de esta función se hace en `Sites/consulta_vuelo.php`.

## Relación entre las localizaciones en el código y la funcionalidad

Se presenta a continuación la funcionalidad que implementan los archivos más importantes dentro de `Sites`:

- `confirmar_vuelo.php`: Acepta o rechaza un vuelo por la DGAC.
- `consulta_vuelo.php`: Implementa la creación de reservas para un vuelo.
- `crear_usuarios.php`: Implementa el botón "Importar usuarios".
- `datos_pasajero.php`: Presenta los datos de los usuarios tipo pasajero.
- `index.php`: Página principal.
- `login.php`: Implementa la funcionalidad de *login*.
- `logout.php`: Cierra la sesión y vuelve a la página principal.
- `sesion_admin.php`: Muestra los vuelos pendientes a ser aprobados o rechazados por la DGAC.
- `sesion_aerolineas_aceptado.php`: Muestra los vuelos aceptados de una aerolínea.
- `sesion_aerolineas_rechazado.php`: Muestra los vuelos rechazados de una aerolínea.
- `sesion_aerolineas.php`: Implementa la propuesta de vuelos por parte de las aerolíneas.
- `sesion_pasajeros.php`: Permite a los pasajeros filtrar vuelos por aeródromo de origen, destino y fecha.

## Supuestos

Se realizaron los siguientes supuestos y acotaciones:

- Para los pasjeros, los datos de pasaporte y nombre se ven con el botón datos en la pagina principal al entrar como usuario.
- Las listas de vuelos aceptados y rechazados para las compañías aéreas se separó en dos páginas para facilitar su vista, los botones para llegar se encuentran en la página de inicio, la página de propuesta de vuelo y el dropdown de menú.
- El issue número 330 tenía tanta información contradictoria que como grupo establecimos la siguiente política: las propuestas de vuelos van en tabla `Propuesta_vuelo` (BDD par) y cuando estas propuestas son aceptadas o rechazadas por la DGAC se crea la instancia de vuelo en la tabla `Vuelo` (BDD impar).
- El filtro de tiempo de la DGAC muestra para un rango de fechas cualquier vuelo que tope temporalmente con el rango en cualquier momento de su ejecución.
- Para generar reservas es necesario generar algunos atributos, en particular el número de asiento, la clase del pasaje y si incluye comida y maleta. Para el número de vuelo se generó un número aleatorio entre 1 y 32. Para la clase del pasaje se utilizó un *default* de `Economica`. Por último, se utilizó un *default* de que todos las reservas creadas incluyen comida y maleta.
- Para la creación de vuelos en la base de datos del grupo impar, se utilizaron los datos de las propuestas de vuelo del grupo 42. Al no poseerse todos los datos para poder crear el vuelo, se tuvieron que crear la velocidad, la altitud y el id de ruta. Estos fueron a través de random con rangos de valores escogidos al observar los ya existentes. En particular, para la velocidad se utiliza un entero entre 200 y 300, para la altitud un entero entre 10000 y 13000, y para la ruta se utiliza una ruta aleatoria de las 331 rutas existentes.
